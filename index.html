<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cemit√©rio Tycoon - Completo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --primary-dark: #1a252f;
            --primary-light: #34495e;
            --secondary: #e74c3c;
            --secondary-dark: #c0392b;
            --accent: #f39c12;
            --accent-dark: #e67e22;
            --success: #27ae60;
            --success-dark: #219653;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --background: #f5f7fa;
            --gold: #f1c40f;
            --silver: #bdc3c7;
            --bronze: #cd7f32;
            --text: #2c3e50;
            --text-light: #7f8c8d;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            max-width: 100%;
            overflow-x: hidden;
            padding-bottom: 80px;
            transition: all 0.3s ease;
        }
        
        body.dark-mode {
            --background: #1a1a1a;
            --light: #2d2d2d;
            --text: #e0e0e0;
            --text-light: #a0a0a0;
            --primary: #34495e;
            --primary-dark: #2c3e50;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-center {
            flex: 1;
            text-align: center;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .real-time-clock {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 15px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3px;
            min-width: 140px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .clock-date {
            font-size: 0.75rem;
            opacity: 0.9;
        }
        
        .clock-time {
            font-weight: bold;
            font-size: 1rem;
        }
        
        /* Theme Toggle */
        .theme-toggle {
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }
        
        .theme-toggle:hover {
            transform: scale(1.05);
            background: rgba(0, 0, 0, 0.4);
        }
        
        /* Stats Bar */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            background: white;
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        body.dark-mode .stats-bar {
            background: var(--light);
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .stat-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .stat-label {
            font-size: 0.7rem;
            color: var(--text-light);
        }
        
        /* Tabs */
        .tab-container {
            display: flex;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        body.dark-mode .tab-container {
            background: var(--light);
        }
        
        .tab {
            flex: 1;
            padding: 12px 5px;
            text-align: center;
            background: white;
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        body.dark-mode .tab {
            background: var(--light);
            color: var(--text);
        }
        
        .tab i {
            font-size: 1.2rem;
        }
        
        .tab:hover {
            background: var(--light);
        }
        
        body.dark-mode .tab:hover {
            background: #3d3d3d;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 15px;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 15px;
        }
        
        body.dark-mode .tab-content {
            background: var(--light);
            color: var(--text);
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Cards */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        body.dark-mode .card {
            background: var(--light);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .card-title {
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .card-icon {
            font-size: 1.5rem;
        }
        
        .card-description {
            font-size: 0.8rem;
            color: var(--text-light);
            flex-grow: 1;
            margin-bottom: 10px;
        }
        
        .card-cost {
            color: var(--accent);
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            height: 8px;
            background-color: var(--light);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--success-dark));
            width: 0%;
            transition: width 0.5s;
            border-radius: 4px;
        }
        
        /* Buttons */
        .button {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .button:active {
            transform: translateY(0);
        }
        
        .button-success {
            background: linear-gradient(135deg, var(--success), var(--success-dark));
        }
        
        .button-warning {
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
        }
        
        .button-danger {
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
        }
        
        .button-small {
            padding: 8px 12px;
            font-size: 0.8rem;
        }
        
        /* Cemetery Grid */
        .cemetery-container {
            background: var(--light);
            border-radius: 15px;
            padding: 10px;
            margin: 15px 0;
            overflow: auto;
        }
        
        .cemetery-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(8, 1fr);
            gap: 5px;
            width: 100%;
            min-height: 350px;
        }
        
        .grid-cell {
            background: #95a5a6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            aspect-ratio: 1/1;
            font-size: 1.2rem;
        }
        
        .grid-cell:hover {
            transform: scale(1.05);
        }
        
        .grid-cell.empty {
            background: #27ae60;
        }
        
        .grid-cell.grave {
            background: var(--primary);
            color: white;
        }
        
        .grid-cell.mine {
            background: var(--secondary);
            color: white;
        }
        
        .grid-cell.treasure {
            background: var(--gold);
            color: black;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Event Log */
        .event-log {
            height: 150px;
            overflow-y: auto;
            background: var(--light);
            padding: 10px;
            border-radius: 15px;
            margin: 15px 0;
        }
        
        .log-entry {
            padding: 8px;
            border-bottom: 1px solid #bdc3c7;
            font-size: 0.8rem;
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        /* Special Events */
        .special-event {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 10px #9b59b6; }
            to { box-shadow: 0 0 20px #8e44ad; }
        }
        
        .event-timer {
            font-size: 1.2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        /* Employee Section */
        .employee-section {
            background: var(--light);
            border-radius: 15px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .employee-card {
            display: flex;
            align-items: center;
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        body.dark-mode .employee-card {
            background: #3d3d3d;
        }
        
        .employee-icon {
            font-size: 2rem;
            margin-right: 15px;
        }
        
        .employee-info {
            flex-grow: 1;
        }
        
        .employee-name {
            font-weight: bold;
            font-size: 1rem;
        }
        
        .employee-description {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 5px;
        }
        
        .employee-count {
            font-weight: bold;
            font-size: 1.2rem;
            margin-right: 15px;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            padding: 10px 15px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        body.dark-mode .bottom-nav {
            background: var(--light);
        }
        
        .nav-button {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 5px;
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .nav-button i {
            font-size: 1.2rem;
            margin-bottom: 3px;
        }
        
        .nav-button.active {
            color: var(--primary);
        }
        
        .nav-button:hover {
            color: var(--primary);
        }
        
        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid var(--light);
        }
        
        .section-title {
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--light);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-input:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        /* Floating Ghost */
        .floating-ghost {
            position: fixed;
            font-size: 3rem;
            cursor: pointer;
            z-index: 1000;
            animation: float 3s infinite ease-in-out;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.7));
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }
        
        /* Floating Text */
        .floating-text {
            position: fixed;
            font-weight: bold;
            font-size: 1.2rem;
            z-index: 1001;
            pointer-events: none;
            animation: floatUp 1.5s forwards;
        }
        
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        /* Achievements */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .achievement-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        body.dark-mode .achievement-card {
            background: var(--light);
        }
        
        .achievement-icon {
            font-size: 2rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: var(--primary);
            color: white;
        }
        
        .achievement-info {
            flex-grow: 1;
        }
        
        .achievement-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .achievement-description {
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        .achievement-progress {
            height: 6px;
            background: var(--light);
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .achievement-progress-fill {
            height: 100%;
            background: var(--success);
            width: 0%;
            transition: width 0.5s;
        }
        
        .achievement-locked {
            opacity: 0.5;
        }
        
        /* Prestige */
        .prestige-card {
            background: linear-gradient(135deg, var(--gold), var(--accent));
            color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }
        
        .prestige-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .prestige-description {
            margin-bottom: 15px;
        }
        
        /* Shop */
        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .shop-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        body.dark-mode .shop-item {
            background: var(--light);
        }
        
        .shop-item-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .shop-item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .shop-item-description {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-bottom: 10px;
        }
        
        /* Research */
        .research-tree {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }
        
        .research-tier {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .research-node {
            background: white;
            border-radius: 10px;
            padding: 15px;
            width: 150px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        body.dark-mode .research-node {
            background: var(--light);
        }
        
        .research-node:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .research-node.unlocked {
            background: var(--success);
            color: white;
        }
        
        .research-node.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .research-node-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        /* Quests */
        .quests-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .quest-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        body.dark-mode .quest-item {
            background: var(--light);
        }
        
        .quest-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .quest-name {
            font-weight: bold;
        }
        
        .quest-reward {
            color: var(--accent);
            font-weight: bold;
        }
        
        .quest-progress {
            height: 8px;
            background: var(--light);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .quest-progress-fill {
            height: 100%;
            background: var(--success);
            width: 0%;
            transition: width 0.5s;
        }
        
        /* Daily Bonus */
        .daily-bonus {
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }
        
        .daily-bonus-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .daily-bonus-description {
            margin-bottom: 15px;
        }
        
        .daily-bonus-streak {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .streak-day {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .streak-day.active {
            background: white;
            color: var(--accent);
        }
        
        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        body.dark-mode .stat-card {
            background: var(--light);
        }
        
        .stat-card-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-card-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        /* Responsive */
        @media (min-width: 768px) {
            .container {
                max-width: 750px;
            }
            
            .card-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
            
            .cemetery-grid {
                grid-template-columns: repeat(10, 1fr);
                grid-template-rows: repeat(10, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Tela de In√≠cio -->
        <div id="start-screen" class="screen active">
            <header>
                <div class="real-time-clock" id="real-time-clock">
                    <div class="clock-date" id="clock-date"></div>
                    <div class="clock-time" id="clock-time"></div>
                </div>
                <div class="header-center">
                    <h1><i class="fas fa-ghost"></i> Cemit√©rio Tycoon</h1>
                    <p class="subtitle">Gerencie seu imp√©rio funer√°rio e descubra tesouros ocultos!</p>
                </div>
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </header>
            
            <div style="text-align: center; margin-top: 40px;">
                <div style="font-size: 4rem; margin-bottom: 20px;">‚ö∞Ô∏è</div>
                <h2>Bem-vindo ao Cemit√©rio Tycoon</h2>
                <p style="margin: 20px 0;">Construa um imp√©rio funer√°rio, realize vel√≥rios, venda planos e explore minas para encontrar tesouros valiosos!</p>
                
                <button id="start-button" class="button button-success" style="margin-top: 20px;">
                    <i class="fas fa-play"></i> Iniciar Novo Jogo
                </button>
                <button id="load-button" class="button" style="margin-top: 10px;">
                    <i class="fas fa-folder-open"></i> Carregar Jogo
                </button>
            </div>
            
            <div style="margin-top: 40px;">
                <div class="section-header">
                    <div class="section-title">Como Jogar</div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Vel√≥rios</div>
                            <div class="card-icon">‚ö∞Ô∏è</div>
                        </div>
                        <div class="card-description">Realize cerim√¥nias f√∫nebres para ganhar dinheiro</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Planos Funer√°rios</div>
                            <div class="card-icon">üìÑ</div>
                        </div>
                        <div class="card-description">Venda planos para gerar renda passiva</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Minera√ß√£o</div>
                            <div class="card-icon">‚õèÔ∏è</div>
                        </div>
                        <div class="card-description">Explore minas para encontrar ossos e tesouros</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Funcion√°rios</div>
                            <div class="card-icon">üë•</div>
                        </div>
                        <div class="card-description">Contrate funcion√°rios para automatizar tarefas</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tela de Nome do Cemit√©rio -->
        <div id="name-screen" class="screen">
            <header>
                <div class="real-time-clock" id="name-clock">
                    <div class="clock-date" id="name-date"></div>
                    <div class="clock-time" id="name-time"></div>
                </div>
                <div class="header-center">
                    <h1><i class="fas fa-ghost"></i> Cemit√©rio Tycoon</h1>
                    <p class="subtitle">D√™ um nome ao seu cemit√©rio</p>
                </div>
                <button class="theme-toggle" id="name-theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </header>
            
            <div style="text-align: center; margin-top: 40px;">
                <div style="font-size: 4rem; margin-bottom: 20px;">üèõÔ∏è</div>
                <h2>Nomeie Seu Cemit√©rio</h2>
                <p style="margin: 20px 0;">Escolha um nome memor√°vel para o seu imp√©rio funer√°rio</p>
                
                <div class="form-group" style="max-width: 400px; margin: 0 auto;">
                    <input type="text" id="cemetery-name" class="form-input" placeholder="Ex: Cemit√©rio da Paz" maxlength="30">
                </div>
                
                <button id="confirm-name-button" class="button button-success" style="margin-top: 20px;">
                    <i class="fas fa-check"></i> Confirmar Nome
                </button>
                <button id="back-to-start-button" class="button" style="margin-top: 10px;">
                    <i class="fas fa-arrow-left"></i> Voltar
                </button>
            </div>
        </div>
        
        <!-- Tela Principal do Jogo -->
        <div id="game-screen" class="screen">
            <header>
                <div class="real-time-clock" id="game-clock">
                    <div class="clock-date" id="game-date"></div>
                    <div class="clock-time" id="game-time"></div>
                </div>
                <div class="header-center">
                    <h1><i class="fas fa-ghost"></i> <span id="cemetery-name-display">Cemit√©rio Tycoon</span></h1>
                    <p class="subtitle" id="prestige-info">Multiplicador: 1.0x | Dia: 1</p>
                </div>
                <button class="theme-toggle" id="game-theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </header>
            
            <!-- Evento Especial -->
            <div id="special-event" class="special-event" style="display: none;">
                <h3 id="event-title">Evento Especial!</h3>
                <p id="event-description">Um evento especial est√° ocorrendo!</p>
                <div class="event-timer" id="event-timer">10:00</div>
                <p id="event-effect"></p>
            </div>
            
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="money-stat">1000</div>
                    <div class="stat-label">Dinheiro</div>
                </div>
                <div class="stat">
                    <div class="stat-icon">ü¶¥</div>
                    <div class="stat-value" id="bones-stat">0</div>
                    <div class="stat-label">Ossos</div>
                </div>
                <div class="stat">
                    <div class="stat-icon">üíé</div>
                    <div class="stat-value" id="treasure-stat">0</div>
                    <div class="stat-label">Tesouros</div>
                </div>
            </div>
            
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-icon">‚ö∞Ô∏è</div>
                    <div class="stat-value" id="coffins-stat">5</div>
                    <div class="stat-label">Caix√µes</div>
                </div>
                <div class="stat">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-value" id="employees-stat">0</div>
                    <div class="stat-label">Funcion√°rios</div>
                </div>
                <div class="stat">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-value" id="prestige-stat">0</div>
                    <div class="stat-label">Prest√≠gio</div>
                </div>
            </div>
            
            <div class="tab-container">
                <div class="tab active" data-tab="cemetery">
                    <i class="fas fa-monument"></i>
                    <span>Cemit√©rio</span>
                </div>
                <div class="tab" data-tab="funeral">
                    <i class="fas fa-church"></i>
                    <span>Vel√≥rios</span>
                </div>
                <div class="tab" data-tab="mining">
                    <i class="fas fa-mountain"></i>
                    <span>Minera√ß√£o</span>
                </div>
                <div class="tab" data-tab="employees">
                    <i class="fas fa-users"></i>
                    <span>Funcion√°rios</span>
                </div>
                <div class="tab" data-tab="prestige">
                    <i class="fas fa-star"></i>
                    <span>Prest√≠gio</span>
                </div>
                <div class="tab" data-tab="achievements">
                    <i class="fas fa-trophy"></i>
                    <span>Conquistas</span>
                </div>
            </div>
            
            <!-- Aba do Cemit√©rio -->
            <div id="cemetery-tab" class="tab-content active">
                <div class="section-header">
                    <div class="section-title">Seu Cemit√©rio</div>
                    <div class="section-actions">
                        <button class="button button-small" id="expand-button">Expandir (üí∞2000)</button>
                        <button class="button button-small button-success" id="save-button">
                            <i class="fas fa-save"></i> Salvar
                        </button>
                    </div>
                </div>
                
                <div class="cemetery-container">
                    <div class="cemetery-grid" id="cemetery-grid">
                        <!-- Grade do cemit√©rio ser√° gerada dinamicamente -->
                    </div>
                </div>
                
                <div class="section-header">
                    <div class="section-title">Constru√ß√µes</div>
                </div>
                
                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">T√∫mulo B√°sico</div>
                            <div class="card-icon">‚ö∞Ô∏è</div>
                        </div>
                        <div class="card-description">Gera renda passiva constante</div>
                        <div class="card-cost">üí∞100</div>
                        <button class="button button-small" id="build-grave-button">Construir</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Mina B√°sica</div>
                            <div class="card-icon">‚õèÔ∏è</div>
                        </div>
                        <div class="card-description">Produz ossos e ocasionalmente tesouros</div>
                        <div class="card-cost">üí∞500</div>
                        <button class="button button-small button-warning" id="build-mine-button">Construir</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Mausol√©u</div>
                            <div class="card-icon">üèõÔ∏è</div>
                        </div>
                        <div class="card-description">Gera renda passiva premium</div>
                        <div class="card-cost">üí∞1500</div>
                        <button class="button button-small button-success" id="build-mausoleum-button">Construir</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Capela</div>
                            <div class="card-icon">‚õ™</div>
                        </div>
                        <div class="card-description">Aumenta efici√™ncia de vel√≥rios</div>
                        <div class="card-cost">üí∞2000</div>
                        <button class="button button-small button-success" id="build-chapel-button">Construir</button>
                    </div>
                </div>
                
                <div class="section-header">
                    <div class="section-title">Decora√ß√µes</div>
                </div>
                
                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Estatueta</div>
                            <div class="card-icon">üóø</div>
                        </div>
                        <div class="card-description">Aumenta atratividade do cemit√©rio</div>
                        <div class="card-cost">üí∞300</div>
                        <button class="button button-small" id="build-statue-button">Colocar</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">L√°pide Ornamentada</div>
                            <div class="card-icon">ü™¶</div>
                        </div>
                        <div class="card-description">Aumenta valor dos t√∫mulos</div>
                        <div class="card-cost">üí∞400</div>
                        <button class="button button-small" id="build-ornate-tombstone-button">Colocar</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Jardim</div>
                            <div class="card-icon">üå∑</div>
                        </div>
                        <div class="card-description">Aumenta felicidade dos visitantes</div>
                        <div class="card-cost">üí∞600</div>
                        <button class="button button-small button-success" id="build-garden-button">Plantar</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Fonte</div>
                            <div class="card-icon">‚õ≤</div>
                        </div>
                        <div class="card-description">Aumenta prest√≠gio do cemit√©rio</div>
                        <div class="card-cost">üí∞1200</div>
                        <button class="button button-small button-success" id="build-fountain-button">Construir</button>
                    </div>
                </div>
            </div>
            
            <!-- Aba de Vel√≥rios -->
            <div id="funeral-tab" class="tab-content">
                <div class="section-header">
                    <div class="section-title">Vel√≥rios e Planos Funer√°rios</div>
                </div>
                
                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Vel√≥rio B√°sico</div>
                            <div class="card-icon">‚ö∞Ô∏è</div>
                        </div>
                        <div class="card-description">Cerim√¥nia f√∫nebre simples</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="basic-funeral-progress"></div>
                        </div>
                        <div class="card-cost">üí∞200</div>
                        <button class="button button-small" id="basic-funeral-button">Realizar</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Vel√≥rio Premium</div>
                            <div class="card-icon">üèõÔ∏è</div>
                        </div>
                        <div class="card-description">Cerim√¥nia de luxo com maior rendimento</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="premium-funeral-progress"></div>
                        </div>
                        <div class="card-cost">üí∞500</div>
                        <button class="button button-small button-warning" id="premium-funeral-button">Realizar</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Plano B√°sico</div>
                            <div class="card-icon">üìÑ</div>
                        </div>
                        <div class="card-description">Venda de planos funer√°rios b√°sicos</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="basic-plan-progress"></div>
                        </div>
                        <div class="card-cost">üí∞150</div>
                        <button class="button button-small" id="basic-plan-button">Vender</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Plano Premium</div>
                            <div class="card-icon">üìú</div>
                        </div>
                        <div class="card-description">Venda de planos funer√°rios premium</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="premium-plan-progress"></div>
                        </div>
                        <div class="card-cost">üí∞400</div>
                        <button class="button button-small button-warning" id="premium-plan-button">Vender</button>
                    </div>
                </div>
                
                <div class="section-header">
                    <div class="section-title">Renda Passiva</div>
                    <div class="section-actions">
                        <span id="passive-income">0</span> üí∞/seg
                    </div>
                </div>
                
                <!-- B√¥nus Di√°rio -->
                <div class="daily-bonus" id="daily-bonus">
                    <div class="daily-bonus-title">B√¥nus Di√°rio</div>
                    <div class="daily-bonus-description">Volte todos os dias para receber recompensas especiais!</div>
                    <button class="button button-warning" id="claim-daily-bonus-button">Resgatar B√¥nus de Hoje</button>
                    <div class="daily-bonus-streak" id="daily-streak">
                        <!-- Dias da semana ser√£o preenchidos dinamicamente -->
                    </div>
                </div>
            </div>
            
            <!-- Aba de Minera√ß√£o -->
            <div id="mining-tab" class="tab-content">
                <div class="section-header">
                    <div class="section-title">Minera√ß√£o e Explora√ß√£o</div>
                </div>
                
                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Picareta B√°sica</div>
                            <div class="card-icon">‚õèÔ∏è</div>
                        </div>
                        <div class="card-description">Cave para encontrar recursos</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="basic-pickaxe-progress"></div>
                        </div>
                        <div class="card-cost">üí∞20</div>
                        <button class="button button-small" id="basic-pickaxe-button">Cavar</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Picareta Aprimorada</div>
                            <div class="card-icon">üõ†Ô∏è</div>
                        </div>
                        <div class="card-description">Maior chance de encontrar tesouros</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="improved-pickaxe-progress"></div>
                        </div>
                        <div class="card-cost">üí∞100</div>
                        <button class="button button-small button-warning" id="improved-pickaxe-button">Cavar</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Minera√ß√£o Profunda</div>
                            <div class="card-icon">üï≥Ô∏è</div>
                        </div>
                        <div class="card-description">Encontre tesouros raros</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="deep-mining-progress"></div>
                        </div>
                        <div class="card-cost">üí∞200</div>
                        <button class="button button-small button-warning" id="deep-mining-button">Minerar</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Vender Recursos</div>
                            <div class="card-icon">üí∞</div>
                        </div>
                        <div class="card-description">Venda ossos e tesouros por dinheiro</div>
                        <div class="card-cost" id="resources-count">Ossos: 0, Tesouros: 0</div>
                        <button class="button button-small" id="sell-resources-button">Vender Tudo</button>
                    </div>
                </div>
                
                <div class="section-header">
                    <div class="section-title">Expedi√ß√µes</div>
                </div>
                
                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Expedi√ß√£o Curta</div>
                            <div class="card-icon">üß≠</div>
                        </div>
                        <div class="card-description">Envie uma equipe para uma expedi√ß√£o r√°pida</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="short-expedition-progress"></div>
                        </div>
                        <div class="card-cost">üí∞500</div>
                        <button class="button button-small" id="short-expedition-button">Iniciar Expedi√ß√£o</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Expedi√ß√£o Longa</div>
                            <div class="card-icon">üó∫Ô∏è</div>
                        </div>
                        <div class="card-description">Envie uma equipe para uma expedi√ß√£o longa</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="long-expedition-progress"></div>
                        </div>
                        <div class="card-cost">üí∞1500</div>
                        <button class="button button-small button-warning" id="long-expedition-button">Iniciar Expedi√ß√£o</button>
                    </div>
                </div>
            </div>
            
            <!-- Aba de Funcion√°rios -->
            <div id="employees-tab" class="tab-content">
                <div class="section-header">
                    <div class="section-title">Contrate Funcion√°rios</div>
                </div>
                
                <div class="employee-section">
                    <div class="employee-card">
                        <div class="employee-icon">üë∑</div>
                        <div class="employee-info">
                            <div class="employee-name">Coveiro</div>
                            <div class="employee-description">Constr√≥i t√∫mulos automaticamente quando h√° espa√ßo dispon√≠vel</div>
                        </div>
                        <div class="employee-count" id="digger-count">0</div>
                        <button class="button button-small" id="hire-digger-button">Contratar (üí∞<span id="digger-cost">500</span>)</button>
                    </div>
                    
                    <div class="employee-card">
                        <div class="employee-icon">üé≠</div>
                        <div class="employee-info">
                            <div class="employee-name">Organizador de Vel√≥rios</div>
                            <div class="employee-description">Realiza vel√≥rios b√°sicos automaticamente quando poss√≠vel</div>
                        </div>
                        <div class="employee-count" id="organizer-count">0</div>
                        <button class="button button-small" id="hire-organizer-button">Contratar (üí∞<span id="organizer-cost">800</span>)</button>
                    </div>
                    
                    <div class="employee-card">
                        <div class="employee-icon">üíº</div>
                        <div class="employee-info">
                            <div class="employee-name">Vendedor</div>
                            <div class="employee-description">Vende planos funer√°rios automaticamente</div>
                        </div>
                        <div class="employee-count" id="salesman-count">0</div>
                        <button class="button button-small" id="hire-salesman-button">Contratar (üí∞<span id="salesman-cost">600</span>)</button>
                    </div>
                    
                    <div class="employee-card">
                        <div class="employee-icon">‚õèÔ∏è</div>
                        <div class="employee-info">
                            <div class="employee-name">Minerador</div>
                            <div class="employee-description">Realiza minera√ß√£o b√°sica automaticamente</div>
                        </div>
                        <div class="employee-count" id="miner-count">0</div>
                        <button class="button button-small" id="hire-miner-button">Contratar (üí∞<span id="miner-cost">1000</span>)</button>
                    </div>
                </div>
                
                <div class="section-header">
                    <div class="section-title">Funcion√°rios Especializados</div>
                </div>
                
                <div class="employee-section">
                    <div class="employee-card">
                        <div class="employee-icon">üåø</div>
                        <div class="employee-info">
                            <div class="employee-name">Jardineiro</div>
                            <div class="employee-description">Aumenta a atratividade do cemit√©rio, gerando renda passiva extra</div>
                        </div>
                        <div class="employee-count" id="gardener-count">0</div>
                        <button class="button button-small button-success" id="hire-gardener-button">Contratar (üí∞<span id="gardener-cost">1200</span>)</button>
                    </div>
                    
                    <div class="employee-card">
                        <div class="employee-icon">üëÆ</div>
                        <div class="employee-info">
                            <div class="employee-name">Seguran√ßa</div>
                            <div class="employee-description">Reduz eventos negativos e aumenta a satisfa√ß√£o dos clientes</div>
                        </div>
                        <div class="employee-count" id="security-count">0</div>
                        <button class="button button-small button-success" id="hire-security-button">Contratar (üí∞<span id="security-cost">1500</span>)</button>
                    </div>
                    
                    <div class="employee-card">
                        <div class="employee-icon">üíê</div>
                        <div class="employee-info">
                            <div class="employee-name">Florista</div>
                            <div class="employee-description">Vende flores para visitantes, gerando renda extra</div>
                        </div>
                        <div class="employee-count" id="florist-count">0</div>
                        <button class="button button-small button-success" id="hire-florist-button">Contratar (üí∞<span id="florist-cost">900</span>)</button>
                    </div>
                    
                    <div class="employee-card">
                        <div class="employee-icon">üëî</div>
                        <div class="employee-info">
                            <div class="employee-name">Gerente</div>
                            <div class="employee-description">Aumenta a efici√™ncia de todos os funcion√°rios em 15%</div>
                        </div>
                        <div class="employee-count" id="manager-count">0</div>
                        <button class="button button-small button-warning" id="hire-manager-button">Contratar (üí∞<span id="manager-cost">3000</span>)</button>
                    </div>
                </div>
                
                <div class="section-header">
                    <div class="section-title">Efeitos dos Funcion√°rios</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Resumo de Automa√ß√£o</div>
                        <div class="card-icon">‚öôÔ∏è</div>
                    </div>
                    <div class="card-description">
                        Seus funcion√°rios est√£o trabalhando automaticamente! Eles realizam a√ß√µes conforme disponibilidade de recursos.
                    </div>
                    <div id="automation-status">
                        <!-- Status da automa√ß√£o ser√° preenchido aqui -->
                    </div>
                </div>
            </div>
            
            <!-- Aba de Prest√≠gio -->
            <div id="prestige-tab" class="tab-content">
                <div class="prestige-card">
                    <div class="prestige-title">Sistema de Prest√≠gio</div>
                    <div class="prestige-description">Reinicie seu progresso para ganhar Pontos de Prest√≠gio e desbloquear melhorias permanentes!</div>
                    <button class="button button-warning" id="prestige-button">Reiniciar por Prest√≠gio</button>
                </div>
                
                <div class="section-header">
                    <div class="section-title">Melhorias de Prest√≠gio</div>
                </div>
                
                <div class="shop-items">
                    <div class="shop-item">
                        <div class="shop-item-icon">üí∞</div>
                        <div class="shop-item-name">Renda Inicial</div>
                        <div class="shop-item-description">Comece com mais dinheiro</div>
                        <div class="card-cost">‚≠ê5</div>
                        <button class="button button-small" id="buy-initial-money-upgrade">Comprar</button>
                    </div>
                    
                    <div class="shop-item">
                        <div class="shop-item-icon">‚ö°</div>
                        <div class="shop-item-name">Velocidade de Produ√ß√£o</div>
                        <div class="shop-item-description">Aumenta a velocidade de todas as produ√ß√µes</div>
                        <div class="card-cost">‚≠ê10</div>
                        <button class="button button-small" id="buy-production-speed-upgrade">Comprar</button>
                    </div>
                    
                    <div class="shop-item">
                        <div class="shop-item-icon">üìà</div>
                        <div class="shop-item-name">Multiplicador de Ganhos</div>
                        <div class="shop-item-description">Aumenta todos os ganhos em 10%</div>
                        <div class="card-cost">‚≠ê15</div>
                        <button class="button button-small" id="buy-earnings-multiplier-upgrade">Comprar</button>
                    </div>
                    
                    <div class="shop-item">
                        <div class="shop-item-icon">üë•</div>
                        <div class="shop-item-name">Capacidade de Funcion√°rios</div>
                        <div class="shop-item-description">Aumenta o limite de funcion√°rios</div>
                        <div class="card-cost">‚≠ê20</div>
                        <button class="button button-small" id="buy-employee-capacity-upgrade">Comprar</button>
                    </div>
                </div>
                
                <div class="section-header">
                    <div class="section-title">√Årvore de Pesquisa</div>
                </div>
                
                <div class="research-tree" id="research-tree">
                    <!-- √Årvore de pesquisa ser√° preenchida dinamicamente -->
                </div>
            </div>
            
            <!-- Aba de Conquistas -->
            <div id="achievements-tab" class="tab-content">
                <div class="section-header">
                    <div class="section-title">Conquistas</div>
                </div>
                
                <div class="achievements-grid" id="achievements-grid">
                    <!-- Conquistas ser√£o preenchidas dinamicamente -->
                </div>
                
                <div class="section-header">
                    <div class="section-title">Miss√µes Di√°rias</div>
                </div>
                
                <div class="quests-list" id="daily-quests">
                    <!-- Miss√µes di√°rias ser√£o preenchidas dinamicamente -->
                </div>
            </div>
            
            <div class="event-log">
                <div class="section-header">
                    <div class="section-title">Log de Eventos</div>
                </div>
                <div id="event-log-content">
                    <!-- Log de eventos ser√° preenchido dinamicamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- Barra de Navega√ß√£o Inferior -->
    <div class="bottom-nav">
        <button class="nav-button" data-tab="cemetery">
            <i class="fas fa-monument"></i>
            <span>Cemit√©rio</span>
        </button>
        <button class="nav-button" data-tab="funeral">
            <i class="fas fa-church"></i>
            <span>Vel√≥rios</span>
        </button>
        <button class="nav-button" data-tab="mining">
            <i class="fas fa-mountain"></i>
            <span>Minera√ß√£o</span>
        </button>
        <button class="nav-button" data-tab="employees">
            <i class="fas fa-users"></i>
            <span>Funcion√°rios</span>
        </button>
        <button class="nav-button" data-tab="prestige">
            <i class="fas fa-star"></i>
            <span>Prest√≠gio</span>
        </button>
    </div>

    <script>
        // Estado do jogo
        const gameState = {
            cemeteryName: "Cemit√©rio Tycoon",
            money: 1000,
            bones: 0,
            treasures: 0,
            coffins: 5,
            employees: 0,
            prestigePoints: 0,
            prestigeMultiplier: 1,
            day: 1,
            
            // Cemit√©rio
            cemeterySize: 8,
            cemeteryGrid: [],
            
            // Vel√≥rios
            basicFuneralProgress: 0,
            premiumFuneralProgress: 0,
            basicPlanProgress: 0,
            premiumPlanProgress: 0,
            passiveIncome: 0,
            
            // Minera√ß√£o
            basicPickaxeProgress: 0,
            improvedPickaxeProgress: 0,
            deepMiningProgress: 0,
            treasuresCollection: [],
            
            // Expeditions
            shortExpeditionProgress: 0,
            longExpeditionProgress: 0,
            
            // Funcion√°rios
            hiredEmployees: {
                digger: 0,
                organizer: 0,
                salesman: 0,
                miner: 0,
                gardener: 0,
                security: 0,
                florist: 0,
                manager: 0
            },
            employeeCosts: {
                digger: 500,
                organizer: 800,
                salesman: 600,
                miner: 1000,
                gardener: 1200,
                security: 1500,
                florist: 900,
                manager: 3000
            },
            
            // Eventos especiais
            specialEvent: {
                active: false,
                type: null,
                endTime: 0,
                multiplier: 1
            },
            
            // Sistema de conquistas
            achievements: {
                firstGrave: { unlocked: false, progress: 0, target: 1 },
                tenGraves: { unlocked: false, progress: 0, target: 10 },
                firstMine: { unlocked: false, progress: 0, target: 1 },
                firstTreasure: { unlocked: false, progress: 0, target: 1 },
                firstEmployee: { unlocked: false, progress: 0, target: 1 },
                moneyMaker: { unlocked: false, progress: 0, target: 10000 },
                boneCollector: { unlocked: false, progress: 0, target: 100 },
                treasureHunter: { unlocked: false, progress: 0, target: 10 }
            },
            
            // Miss√µes di√°rias
            dailyQuests: {},
            
            // B√¥nus di√°rio
            lastDailyBonus: null,
            dailyBonusStreak: 0,
            
            // Sistema de prest√≠gio
            prestigeUpgrades: {
                initialMoney: 0,
                productionSpeed: 0,
                earningsMultiplier: 0,
                employeeCapacity: 0
            },
            
            // Pesquisa
            research: {
                advancedMining: false,
                efficientFunerals: false,
                automatedSales: false,
                cemeteryExpansion: false
            },
            
            // Configura√ß√µes
            darkMode: false,
            
            // Fantasma flutuante
            floatingGhost: {
                active: false,
                element: null,
                timeout: null
            }
        };

        // Inicializa√ß√£o do jogo
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar event listeners
            document.getElementById('start-button').addEventListener('click', showNameScreen);
            document.getElementById('load-button').addEventListener('click', loadGame);
            document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
            document.getElementById('name-theme-toggle').addEventListener('click', toggleTheme);
            document.getElementById('game-theme-toggle').addEventListener('click', toggleTheme);
            document.getElementById('confirm-name-button').addEventListener('click', confirmCemeteryName);
            document.getElementById('back-to-start-button').addEventListener('click', showStartScreen);
            document.getElementById('save-button').addEventListener('click', saveGame);
            
            // Navega√ß√£o por tabs
            document.querySelectorAll('.tab, .nav-button').forEach(tab => {
                if (tab.getAttribute('data-tab')) {
                    tab.addEventListener('click', function() {
                        const tabId = this.getAttribute('data-tab');
                        switchTab(tabId);
                        
                        // Atualizar estado dos bot√µes de navega√ß√£o
                        document.querySelectorAll('.nav-button').forEach(btn => {
                            btn.classList.remove('active');
                        });
                        this.classList.add('active');
                    });
                }
            });
            
            // A√ß√µes do cemit√©rio
            document.getElementById('build-grave-button').addEventListener('click', buildGrave);
            document.getElementById('build-mine-button').addEventListener('click', buildMine);
            document.getElementById('build-mausoleum-button').addEventListener('click', buildMausoleum);
            document.getElementById('build-chapel-button').addEventListener('click', buildChapel);
            document.getElementById('build-statue-button').addEventListener('click', buildStatue);
            document.getElementById('build-ornate-tombstone-button').addEventListener('click', buildOrnateTombstone);
            document.getElementById('build-garden-button').addEventListener('click', buildGarden);
            document.getElementById('build-fountain-button').addEventListener('click', buildFountain);
            document.getElementById('expand-button').addEventListener('click', expandCemetery);
            
            // Vel√≥rios
            document.getElementById('basic-funeral-button').addEventListener('click', startBasicFuneral);
            document.getElementById('premium-funeral-button').addEventListener('click', startPremiumFuneral);
            document.getElementById('basic-plan-button').addEventListener('click', sellBasicPlan);
            document.getElementById('premium-plan-button').addEventListener('click', sellPremiumPlan);
            document.getElementById('claim-daily-bonus-button').addEventListener('click', claimDailyBonus);
            
            // Minera√ß√£o
            document.getElementById('basic-pickaxe-button').addEventListener('click', startBasicPickaxe);
            document.getElementById('improved-pickaxe-button').addEventListener('click', startImprovedPickaxe);
            document.getElementById('deep-mining-button').addEventListener('click', startDeepMining);
            document.getElementById('sell-resources-button').addEventListener('click', sellResources);
            document.getElementById('short-expedition-button').addEventListener('click', startShortExpedition);
            document.getElementById('long-expedition-button').addEventListener('click', startLongExpedition);
            
            // Funcion√°rios
            document.getElementById('hire-digger-button').addEventListener('click', () => hireEmployee('digger'));
            document.getElementById('hire-organizer-button').addEventListener('click', () => hireEmployee('organizer'));
            document.getElementById('hire-salesman-button').addEventListener('click', () => hireEmployee('salesman'));
            document.getElementById('hire-miner-button').addEventListener('click', () => hireEmployee('miner'));
            document.getElementById('hire-gardener-button').addEventListener('click', () => hireEmployee('gardener'));
            document.getElementById('hire-security-button').addEventListener('click', () => hireEmployee('security'));
            document.getElementById('hire-florist-button').addEventListener('click', () => hireEmployee('florist'));
            document.getElementById('hire-manager-button').addEventListener('click', () => hireEmployee('manager'));
            
            // Prest√≠gio
            document.getElementById('prestige-button').addEventListener('click', prestigeReset);
            document.getElementById('buy-initial-money-upgrade').addEventListener('click', () => buyPrestigeUpgrade('initialMoney'));
            document.getElementById('buy-production-speed-upgrade').addEventListener('click', () => buyPrestigeUpgrade('productionSpeed'));
            document.getElementById('buy-earnings-multiplier-upgrade').addEventListener('click', () => buyPrestigeUpgrade('earningsMultiplier'));
            document.getElementById('buy-employee-capacity-upgrade').addEventListener('click', () => buyPrestigeUpgrade('employeeCapacity'));
            
            // Inicializar grade do cemit√©rio
            initializeCemetery();
            
            // Iniciar rel√≥gio em tempo real
            startRealTimeClock();
            
            // Inicializar conquistas
            initializeAchievements();
            
            // Inicializar sistema de b√¥nus di√°rio
            initializeDailyBonus();
            
            // Inicializar √°rvore de pesquisa
            initializeResearchTree();
            
            // Iniciar sistema de fantasma flutuante
            startFloatingGhost();
            
            // Iniciar sistema de texto flutuante
            setupFloatingText();
            
            // Carregar jogo salvo, se existir
            loadGame();
            
            // Iniciar loop do jogo
            setInterval(gameLoop, 1000);
            
            // Iniciar eventos especiais
            setInterval(checkSpecialEvents, 30000); // Verificar a cada 30 segundos
            
            // Atualizar display inicial
            updateDisplay();
        });

        // Mostrar tela de nome do cemit√©rio
        function showNameScreen() {
            showScreen('name-screen');
        }

        // Mostrar tela inicial
        function showStartScreen() {
            showScreen('start-screen');
        }

        // Confirmar nome do cemit√©rio
        function confirmCemeteryName() {
            const nameInput = document.getElementById('cemetery-name');
            const name = nameInput.value.trim();
            
            if (name === '') {
                showNotification('Por favor, digite um nome para o cemit√©rio!', 'error');
                return;
            }
            
            gameState.cemeteryName = name;
            startNewGame();
        }

        // Rel√≥gio em tempo real
        function startRealTimeClock() {
            function updateClock() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('pt-BR');
                const dateString = now.toLocaleDateString('pt-BR');
                
                // Atualizar todos os rel√≥gios
                document.querySelectorAll('.clock-date').forEach(el => {
                    el.textContent = dateString;
                });
                
                document.querySelectorAll('.clock-time').forEach(el => {
                    el.textContent = timeString;
                });
            }
            
            updateClock();
            setInterval(updateClock, 1000);
        }

        // Alternar tema claro/escuro
        function toggleTheme() {
            gameState.darkMode = !gameState.darkMode;
            document.body.classList.toggle('dark-mode', gameState.darkMode);
            
            const themeIcons = document.querySelectorAll('.theme-toggle i');
            themeIcons.forEach(icon => {
                if (gameState.darkMode) {
                    icon.className = 'fas fa-sun';
                } else {
                    icon.className = 'fas fa-moon';
                }
            });
            
            saveGame();
        }

        // Inicializar o cemit√©rio
        function initializeCemetery() {
            const grid = document.getElementById('cemetery-grid');
            grid.innerHTML = '';
            
            // Configurar grade
            grid.style.gridTemplateColumns = `repeat(${gameState.cemeterySize}, 1fr)`;
            grid.style.gridTemplateRows = `repeat(${gameState.cemeterySize}, 1fr)`;
            
            // Inicializar array do cemit√©rio se n√£o existir
            if (gameState.cemeteryGrid.length === 0) {
                for (let i = 0; i < gameState.cemeterySize * gameState.cemeterySize; i++) {
                    gameState.cemeteryGrid.push({ type: 'empty', level: 0 });
                }
                
                // Adicionar alguns t√∫mulos iniciais
                for (let i = 0; i < 5; i++) {
                    const randomIndex = Math.floor(Math.random() * gameState.cemeteryGrid.length);
                    gameState.cemeteryGrid[randomIndex] = { type: 'grave', level: 1 };
                }
            }
            
            // Criar c√©lulas
            gameState.cemeteryGrid.forEach((cell, index) => {
                const cellElement = document.createElement('div');
                cellElement.className = `grid-cell ${cell.type}`;
                
                // Adicionar conte√∫do baseado no tipo
                if (cell.type === 'empty') {
                    cellElement.textContent = '';
                } else if (cell.type === 'grave') {
                    cellElement.textContent = '‚ö∞Ô∏è';
                    cellElement.title = `T√∫mulo N√≠vel ${cell.level}`;
                } else if (cell.type === 'mine') {
                    cellElement.textContent = '‚õèÔ∏è';
                    cellElement.title = `Mina N√≠vel ${cell.level}`;
                } else if (cell.type === 'treasure') {
                    cellElement.textContent = 'üíé';
                    cellElement.title = 'Tesouro!';
                } else if (cell.type === 'mausoleum') {
                    cellElement.textContent = 'üèõÔ∏è';
                    cellElement.title = 'Mausol√©u';
                } else if (cell.type === 'chapel') {
                    cellElement.textContent = '‚õ™';
                    cellElement.title = 'Capela';
                } else if (cell.type === 'statue') {
                    cellElement.textContent = 'üóø';
                    cellElement.title = 'Estatueta Decorativa';
                } else if (cell.type === 'ornate_tombstone') {
                    cellElement.textContent = 'ü™¶';
                    cellElement.title = 'L√°pide Ornamentada';
                } else if (cell.type === 'garden') {
                    cellElement.textContent = 'üå∑';
                    cellElement.title = 'Jardim';
                } else if (cell.type === 'fountain') {
                    cellElement.textContent = '‚õ≤';
                    cellElement.title = 'Fonte';
                }
                
                // Adicionar evento de clique
                cellElement.addEventListener('click', () => handleCemeteryCellClick(index));
                
                grid.appendChild(cellElement);
            });
        }

        // Manipular clique em c√©lula do cemit√©rio
        function handleCemeteryCellClick(index) {
            const cell = gameState.cemeteryGrid[index];
            
            if (cell.type === 'empty') {
                showNotification('Toque em um bot√£o de constru√ß√£o para construir aqui.', 'info');
            } else if (cell.type === 'grave') {
                showNotification(`T√∫mulo N√≠vel ${cell.level}. Gera renda passiva.`, 'info');
            } else if (cell.type === 'mine') {
                showNotification(`Mina N√≠vel ${cell.level}. Produz ossos e tesouros.`, 'info');
            } else if (cell.type === 'mausoleum') {
                showNotification('Mausol√©u. Gera renda passiva premium.', 'info');
            } else if (cell.type === 'chapel') {
                showNotification('Capela. Aumenta efici√™ncia de vel√≥rios.', 'info');
            } else if (cell.type === 'statue') {
                showNotification('Estatueta. Aumenta a atratividade do cemit√©rio.', 'info');
            } else if (cell.type === 'ornate_tombstone') {
                showNotification('L√°pide Ornamentada. Aumenta o valor dos t√∫mulos.', 'info');
            } else if (cell.type === 'garden') {
                showNotification('Jardim. Aumenta a felicidade dos visitantes.', 'info');
            } else if (cell.type === 'fountain') {
                showNotification('Fonte. Aumenta o prest√≠gio do cemit√©rio.', 'info');
            } else if (cell.type === 'treasure') {
                collectTreasure(index);
            }
        }

        // Coletar tesouro
        function collectTreasure(index) {
            gameState.treasures++;
            gameState.cemeteryGrid[index] = { type: 'empty', level: 0 };
            
            // Adicionar √† cole√ß√£o
            const treasureTypes = ['Anel Antigo', 'Moeda Rara', 'Estatueta Valiosa', 'Joia Preciosa', 'Rel√≠quia Familiar', 'Medalha Hist√≥rica'];
            const randomTreasure = treasureTypes[Math.floor(Math.random() * treasureTypes.length)];
            gameState.treasuresCollection.push(randomTreasure);
            
            // Verificar conquista
            checkAchievement('firstTreasure', 1);
            
            showNotification(`Voc√™ encontrou um tesouro: ${randomTreasure}!`, 'success');
            addToEventLog(`Encontrou tesouro: ${randomTreasure}`);
            
            updateDisplay();
            initializeCemetery();
        }

        // Construir t√∫mulo
        function buildGrave() {
            if (gameState.money < 100) {
                showNotification('Dinheiro insuficiente para construir um t√∫mulo!', 'error');
                return;
            }
            
            // Encontrar c√©lula vazia
            const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
            if (emptyIndex === -1) {
                showNotification('N√£o h√° espa√ßo vazio no cemit√©rio! Expanda-o primeiro.', 'error');
                return;
            }
            
            gameState.money -= 100;
            gameState.cemeteryGrid[emptyIndex] = { type: 'grave', level: 1 };
            
            // Verificar conquistas
            checkAchievement('firstGrave', 1);
            checkAchievement('tenGraves', countGraves());
            
            showNotification('T√∫mulo constru√≠do com sucesso!', 'success');
            addToEventLog('Construiu um t√∫mulo');
            
            updateDisplay();
            initializeCemetery();
        }

        // Construir mina
        function buildMine() {
            if (gameState.money < 500) {
                showNotification('Dinheiro insuficiente para construir uma mina!', 'error');
                return;
            }
            
            // Encontrar c√©lula vazia
            const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
            if (emptyIndex === -1) {
                showNotification('N√£o h√° espa√ßo vazio no cemit√©rio! Expanda-o primeiro.', 'error');
                return;
            }
            
            gameState.money -= 500;
            gameState.cemeteryGrid[emptyIndex] = { type: 'mine', level: 1 };
            
            // Verificar conquista
            checkAchievement('firstMine', 1);
            
            showNotification('Mina constru√≠da com sucesso!', 'success');
            addToEventLog('Construiu uma mina');
            
            updateDisplay();
            initializeCemetery();
        }

        // Construir mausol√©u
        function buildMausoleum() {
            if (gameState.money < 1500) {
                showNotification('Dinheiro insuficiente para construir um mausol√©u!', 'error');
                return;
            }
            
            // Encontrar c√©lula vazia
            const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
            if (emptyIndex === -1) {
                showNotification('N√£o h√° espa√ßo vazio no cemit√©rio! Expanda-o primeiro.', 'error');
                return;
            }
            
            gameState.money -= 1500;
            gameState.cemeteryGrid[emptyIndex] = { type: 'mausoleum', level: 1 };
            
            showNotification('Mausol√©u constru√≠do com sucesso!', 'success');
            addToEventLog('Construiu um mausol√©u');
            
            updateDisplay();
            initializeCemetery();
        }

        // Construir capela
        function buildChapel() {
            if (gameState.money < 2000) {
                showNotification('Dinheiro insuficiente para construir uma capela!', 'error');
                return;
            }
            
            // Encontrar c√©lula vazia
            const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
            if (emptyIndex === -1) {
                showNotification('N√£o h√° espa√ßo vazio no cemit√©rio! Expanda-o primeiro.', 'error');
                return;
            }
            
            gameState.money -= 2000;
            gameState.cemeteryGrid[emptyIndex] = { type: 'chapel', level: 1 };
            
            showNotification('Capela constru√≠da com sucesso!', 'success');
            addToEventLog('Construiu uma capela');
            
            updateDisplay();
            initializeCemetery();
        }

        // Construir estatueta
        function buildStatue() {
            if (gameState.money < 300) {
                showNotification('Dinheiro insuficiente para colocar uma estatueta!', 'error');
                return;
            }
            
            // Encontrar c√©lula vazia
            const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
            if (emptyIndex === -1) {
                showNotification('N√£o h√° espa√ßo vazio no cemit√©rio! Expanda-o primeiro.', 'error');
                return;
            }
            
            gameState.money -= 300;
            gameState.cemeteryGrid[emptyIndex] = { type: 'statue', level: 1 };
            
            showNotification('Estatueta colocada com sucesso!', 'success');
            addToEventLog('Colocou uma estatueta decorativa');
            
            updateDisplay();
            initializeCemetery();
        }

        // Construir l√°pide ornamentada
        function buildOrnateTombstone() {
            if (gameState.money < 400) {
                showNotification('Dinheiro insuficiente para colocar uma l√°pide ornamentada!', 'error');
                return;
            }
            
            // Encontrar c√©lula vazia
            const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
            if (emptyIndex === -1) {
                showNotification('N√£o h√° espa√ßo vazio no cemit√©rio! Expanda-o primeiro.', 'error');
                return;
            }
            
            gameState.money -= 400;
            gameState.cemeteryGrid[emptyIndex] = { type: 'ornate_tombstone', level: 1 };
            
            showNotification('L√°pide ornamentada colocada com sucesso!', 'success');
            addToEventLog('Colocou uma l√°pide ornamentada');
            
            updateDisplay();
            initializeCemetery();
        }

        // Construir jardim
        function buildGarden() {
            if (gameState.money < 600) {
                showNotification('Dinheiro insuficiente para plantar um jardim!', 'error');
                return;
            }
            
            // Encontrar c√©lula vazia
            const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
            if (emptyIndex === -1) {
                showNotification('N√£o h√° espa√ßo vazio no cemit√©rio! Expanda-o primeiro.', 'error');
                return;
            }
            
            gameState.money -= 600;
            gameState.cemeteryGrid[emptyIndex] = { type: 'garden', level: 1 };
            
            showNotification('Jardim plantado com sucesso!', 'success');
            addToEventLog('Plantou um jardim');
            
            updateDisplay();
            initializeCemetery();
        }

        // Construir fonte
        function buildFountain() {
            if (gameState.money < 1200) {
                showNotification('Dinheiro insuficiente para construir uma fonte!', 'error');
                return;
            }
            
            // Encontrar c√©lula vazia
            const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
            if (emptyIndex === -1) {
                showNotification('N√£o h√° espa√ßo vazio no cemit√©rio! Expanda-o primeiro.', 'error');
                return;
            }
            
            gameState.money -= 1200;
            gameState.cemeteryGrid[emptyIndex] = { type: 'fountain', level: 1 };
            
            showNotification('Fonte constru√≠da com sucesso!', 'success');
            addToEventLog('Construiu uma fonte');
            
            updateDisplay();
            initializeCemetery();
        }

        // Expandir cemit√©rio
        function expandCemetery() {
            if (gameState.money < 2000) {
                showNotification('Dinheiro insuficiente para expandir o cemit√©rio!', 'error');
                return;
            }
            
            gameState.money -= 2000;
            gameState.cemeterySize += 2;
            
            // Adicionar novas c√©lulas vazias
            const newCells = (gameState.cemeterySize * gameState.cemeterySize) - gameState.cemeteryGrid.length;
            for (let i = 0; i < newCells; i++) {
                gameState.cemeteryGrid.push({ type: 'empty', level: 0 });
            }
            
            showNotification('Cemit√©rio expandido com sucesso!', 'success');
            addToEventLog('Expandiu o cemit√©rio');
            
            updateDisplay();
            initializeCemetery();
        }

        // Iniciar vel√≥rio b√°sico
        function startBasicFuneral() {
            if (gameState.money < 200) {
                showNotification('Dinheiro insuficiente para realizar um vel√≥rio b√°sico!', 'error');
                return;
            }
            
            if (gameState.coffins < 1) {
                showNotification('Caix√µes insuficientes!', 'error');
                return;
            }
            
            gameState.basicFuneralProgress = 100;
            gameState.money -= 200;
            gameState.coffins -= 1;
            
            showNotification('Vel√≥rio b√°sico iniciado!', 'info');
            addToEventLog('Iniciou vel√≥rio b√°sico');
            
            updateDisplay();
        }

        // Iniciar vel√≥rio premium
        function startPremiumFuneral() {
            if (gameState.money < 500) {
                showNotification('Dinheiro insuficiente para realizar um vel√≥rio premium!', 'error');
                return;
            }
            
            if (gameState.coffins < 1) {
                showNotification('Caix√µes insuficientes!', 'error');
                return;
            }
            
            gameState.premiumFuneralProgress = 100;
            gameState.money -= 500;
            gameState.coffins -= 1;
            
            showNotification('Vel√≥rio premium iniciado!', 'info');
            addToEventLog('Iniciou vel√≥rio premium');
            
            updateDisplay();
        }

        // Vender plano b√°sico
        function sellBasicPlan() {
            if (gameState.money < 150) {
                showNotification('Dinheiro insuficiente para criar um plano b√°sico!', 'error');
                return;
            }
            
            gameState.basicPlanProgress = 100;
            gameState.money -= 150;
            
            showNotification('Plano funer√°rio b√°sico em andamento!', 'info');
            addToEventLog('Iniciou venda de plano b√°sico');
            
            updateDisplay();
        }

        // Vender plano premium
        function sellPremiumPlan() {
            if (gameState.money < 400) {
                showNotification('Dinheiro insuficiente para criar um plano premium!', 'error');
                return;
            }
            
            gameState.premiumPlanProgress = 100;
            gameState.money -= 400;
            
            showNotification('Plano funer√°rio premium em andamento!', 'info');
            addToEventLog('Iniciou venda de plano premium');
            
            updateDisplay();
        }

        // Iniciar picareta b√°sica
        function startBasicPickaxe() {
            if (gameState.money < 20) {
                showNotification('Dinheiro insuficiente para usar a picareta b√°sica!', 'error');
                return;
            }
            
            gameState.basicPickaxeProgress = 100;
            gameState.money -= 20;
            
            showNotification('Usando picareta b√°sica...', 'info');
            addToEventLog('Iniciou minera√ß√£o com picareta b√°sica');
            
            updateDisplay();
        }

        // Iniciar picareta aprimorada
        function startImprovedPickaxe() {
            if (gameState.money < 100) {
                showNotification('Dinheiro insuficiente para usar a picareta aprimorada!', 'error');
                return;
            }
            
            gameState.improvedPickaxeProgress = 100;
            gameState.money -= 100;
            
            showNotification('Usando picareta aprimorada...', 'info');
            addToEventLog('Iniciou minera√ß√£o com picareta aprimorada');
            
            updateDisplay();
        }

        // Iniciar minera√ß√£o profunda
        function startDeepMining() {
            if (gameState.money < 200) {
                showNotification('Dinheiro insuficiente para minera√ß√£o profunda!', 'error');
                return;
            }
            
            gameState.deepMiningProgress = 100;
            gameState.money -= 200;
            
            showNotification('Minera√ß√£o profunda iniciada!', 'info');
            addToEventLog('Iniciou minera√ß√£o profunda');
            
            updateDisplay();
        }

        // Iniciar expedi√ß√£o curta
        function startShortExpedition() {
            if (gameState.money < 500) {
                showNotification('Dinheiro insuficiente para uma expedi√ß√£o curta!', 'error');
                return;
            }
            
            gameState.shortExpeditionProgress = 100;
            gameState.money -= 500;
            
            showNotification('Expedi√ß√£o curta iniciada!', 'info');
            addToEventLog('Iniciou expedi√ß√£o curta');
            
            updateDisplay();
        }

        // Iniciar expedi√ß√£o longa
        function startLongExpedition() {
            if (gameState.money < 1500) {
                showNotification('Dinheiro insuficiente para uma expedi√ß√£o longa!', 'error');
                return;
            }
            
            gameState.longExpeditionProgress = 100;
            gameState.money -= 1500;
            
            showNotification('Expedi√ß√£o longa iniciada!', 'info');
            addToEventLog('Iniciou expedi√ß√£o longa');
            
            updateDisplay();
        }

        // Vender recursos
        function sellResources() {
            if (gameState.bones < 1 && gameState.treasures < 1) {
                showNotification('Voc√™ n√£o tem recursos para vender!', 'error');
                return;
            }
            
            const bonesEarnings = gameState.bones * 5;
            const treasuresEarnings = gameState.treasures * 1000;
            const totalEarnings = bonesEarnings + treasuresEarnings;
            
            gameState.money += totalEarnings;
            
            // Verificar conquistas
            checkAchievement('boneCollector', gameState.bones);
            checkAchievement('treasureHunter', gameState.treasures);
            
            showNotification(`Vendeu ${gameState.bones} ossos e ${gameState.treasures} tesouros por üí∞${totalEarnings}!`, 'success');
            addToEventLog(`Vendeu recursos (+üí∞${totalEarnings})`);
            
            gameState.bones = 0;
            gameState.treasures = 0;
            gameState.treasuresCollection = [];
            updateDisplay();
        }

        // Contratar funcion√°rio
        function hireEmployee(type) {
            const cost = gameState.employeeCosts[type];
            
            if (gameState.money < cost) {
                showNotification(`Dinheiro insuficiente para contratar este funcion√°rio!`, 'error');
                return;
            }
            
            gameState.money -= cost;
            gameState.hiredEmployees[type]++;
            gameState.employees++;
            
            // Verificar conquista
            checkAchievement('firstEmployee', 1);
            
            // Aumentar custo para pr√≥xima contrata√ß√£o
            gameState.employeeCosts[type] = Math.floor(cost * 1.5);
            
            const employeeNames = {
                digger: 'Coveiro',
                organizer: 'Organizador de Vel√≥rios',
                salesman: 'Vendedor',
                miner: 'Minerador',
                gardener: 'Jardineiro',
                security: 'Seguran√ßa',
                florist: 'Florista',
                manager: 'Gerente'
            };
            
            showNotification(`Contratou um ${employeeNames[type]}!`, 'success');
            addToEventLog(`Contratou um ${employeeNames[type]}`);
            
            updateDisplay();
        }

        // Inicializar sistema de conquistas
        function initializeAchievements() {
            const achievementsGrid = document.getElementById('achievements-grid');
            achievementsGrid.innerHTML = '';
            
            const achievements = [
                { id: 'firstGrave', name: 'Primeiro T√∫mulo', description: 'Construa seu primeiro t√∫mulo', icon: '‚ö∞Ô∏è' },
                { id: 'tenGraves', name: 'Coveiro Profissional', description: 'Construa 10 t√∫mulos', icon: '‚ö∞Ô∏è‚ö∞Ô∏è' },
                { id: 'firstMine', name: 'Primeira Mina', description: 'Construa sua primeira mina', icon: '‚õèÔ∏è' },
                { id: 'firstTreasure', name: 'Ca√ßador de Tesouros', description: 'Encontre seu primeiro tesouro', icon: 'üíé' },
                { id: 'firstEmployee', name: 'Primeiro Funcion√°rio', description: 'Contrate seu primeiro funcion√°rio', icon: 'üë•' },
                { id: 'moneyMaker', name: 'Fazendo Dinheiro', description: 'Acumule 10.000 de dinheiro', icon: 'üí∞' },
                { id: 'boneCollector', name: 'Colecionador de Ossos', description: 'Colecione 100 ossos', icon: 'ü¶¥' },
                { id: 'treasureHunter', name: 'Ca√ßador de Tesouros', description: 'Encontre 10 tesouros', icon: 'üíéüíé' }
            ];
            
            achievements.forEach(achievement => {
                const achievementCard = document.createElement('div');
                achievementCard.className = `achievement-card ${gameState.achievements[achievement.id].unlocked ? '' : 'achievement-locked'}`;
                
                const progress = gameState.achievements[achievement.id].progress;
                const target = gameState.achievements[achievement.id].target;
                const progressPercent = Math.min(100, (progress / target) * 100);
                
                achievementCard.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div class="achievement-info">
                        <div class="achievement-name">${achievement.name}</div>
                        <div class="achievement-description">${achievement.description}</div>
                        <div class="achievement-progress">
                            <div class="achievement-progress-fill" style="width: ${progressPercent}%"></div>
                        </div>
                    </div>
                `;
                
                achievementsGrid.appendChild(achievementCard);
            });
        }

        // Verificar conquista
        function checkAchievement(achievementId, progress) {
            if (gameState.achievements[achievementId].unlocked) return;
            
            gameState.achievements[achievementId].progress = progress;
            
            if (progress >= gameState.achievements[achievementId].target) {
                gameState.achievements[achievementId].unlocked = true;
                showNotification(`Conquista desbloqueada: ${achievementId.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}!`, 'success');
                addToEventLog(`Conquista desbloqueada: ${achievementId.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}`);
                
                // Recompensa por conquista
                gameState.money += 500;
                gameState.prestigePoints += 1;
                
                // Atualizar display de conquistas
                initializeAchievements();
            }
        }

        // Contar t√∫mulos
        function countGraves() {
            return gameState.cemeteryGrid.filter(cell => cell.type === 'grave').length;
        }

        // Inicializar sistema de b√¥nus di√°rio
        function initializeDailyBonus() {
            const today = new Date().toDateString();
            
            // Verificar se j√° resgatou o b√¥nus hoje
            if (gameState.lastDailyBonus === today) {
                document.getElementById('claim-daily-bonus-button').disabled = true;
                document.getElementById('claim-daily-bonus-button').textContent = 'B√¥nus J√° Resgatado Hoje';
            }
            
            // Atualizar streak
            const streakContainer = document.getElementById('daily-streak');
            streakContainer.innerHTML = '';
            
            for (let i = 0; i < 7; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = `streak-day ${i < gameState.dailyBonusStreak ? 'active' : ''}`;
                dayElement.textContent = i + 1;
                streakContainer.appendChild(dayElement);
            }
        }

        // Resgatar b√¥nus di√°rio
        function claimDailyBonus() {
            const today = new Date().toDateString();
            
            if (gameState.lastDailyBonus === today) {
                showNotification('Voc√™ j√° resgatou o b√¥nus de hoje!', 'error');
                return;
            }
            
            // Calcular recompensa
            const baseReward = 500;
            const streakBonus = gameState.dailyBonusStreak * 100;
            const totalReward = baseReward + streakBonus;
            
            gameState.money += totalReward;
            gameState.lastDailyBonus = today;
            gameState.dailyBonusStreak = (gameState.dailyBonusStreak + 1) % 7;
            
            showNotification(`B√¥nus di√°rio resgatado! +üí∞${totalReward} (Streak: ${gameState.dailyBonusStreak})`, 'success');
            addToEventLog(`Resgatou b√¥nus di√°rio (+üí∞${totalReward})`);
            
            // Atualizar UI
            document.getElementById('claim-daily-bonus-button').disabled = true;
            document.getElementById('claim-daily-bonus-button').textContent = 'B√¥nus J√° Resgatado Hoje';
            
            initializeDailyBonus();
            updateDisplay();
        }

        // Inicializar √°rvore de pesquisa
        function initializeResearchTree() {
            const researchTree = document.getElementById('research-tree');
            researchTree.innerHTML = '';
            
            const researchNodes = [
                { id: 'advancedMining', name: 'Minera√ß√£o Avan√ßada', description: 'Desbloqueia minera√ß√£o profunda', icon: 'üï≥Ô∏è', cost: 1000, tier: 1 },
                { id: 'efficientFunerals', name: 'Vel√≥rios Eficientes', description: 'Vel√≥rios produzem 20% mais', icon: '‚ö∞Ô∏è', cost: 1500, tier: 1 },
                { id: 'automatedSales', name: 'Vendas Automatizadas', description: 'Vendedores s√£o 25% mais eficientes', icon: 'üíº', cost: 2000, tier: 2 },
                { id: 'cemeteryExpansion', name: 'Expans√£o de Cemit√©rio', description: 'Desbloqueia expans√µes maiores', icon: 'üèûÔ∏è', cost: 3000, tier: 2 }
            ];
            
            // Agrupar por tier
            const tiers = {};
            researchNodes.forEach(node => {
                if (!tiers[node.tier]) tiers[node.tier] = [];
                tiers[node.tier].push(node);
            });
            
            // Criar tiers
            Object.keys(tiers).forEach(tier => {
                const tierElement = document.createElement('div');
                tierElement.className = 'research-tier';
                
                tiers[tier].forEach(node => {
                    const nodeElement = document.createElement('div');
                    const isUnlocked = gameState.research[node.id];
                    const canAfford = gameState.money >= node.cost;
                    
                    nodeElement.className = `research-node ${isUnlocked ? 'unlocked' : canAfford ? '' : 'locked'}`;
                    nodeElement.innerHTML = `
                        <div class="research-node-icon">${node.icon}</div>
                        <div class="research-node-name">${node.name}</div>
                        <div class="research-node-cost">üí∞${node.cost}</div>
                    `;
                    
                    if (!isUnlocked && canAfford) {
                        nodeElement.addEventListener('click', () => researchNode(node.id, node.cost));
                    }
                    
                    tierElement.appendChild(nodeElement);
                });
                
                researchTree.appendChild(tierElement);
            });
        }

        // Pesquisar tecnologia
        function researchNode(nodeId, cost) {
            if (gameState.money < cost) {
                showNotification('Dinheiro insuficiente para pesquisar!', 'error');
                return;
            }
            
            gameState.money -= cost;
            gameState.research[nodeId] = true;
            
            showNotification(`Tecnologia pesquisada: ${nodeId.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}!`, 'success');
            addToEventLog(`Pesquisou: ${nodeId.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}`);
            
            initializeResearchTree();
            updateDisplay();
        }

        // Rein√≠cio de prest√≠gio
        function prestigeReset() {
            if (gameState.money < 100000) {
                showNotification('Voc√™ precisa de pelo menos üí∞100.000 para reiniciar por prest√≠gio!', 'error');
                return;
            }
            
            const prestigePoints = Math.floor(gameState.money / 100000);
            gameState.prestigePoints += prestigePoints;
            
            showNotification(`Rein√≠cio de prest√≠gio! Ganhou ‚≠ê${prestigePoints} pontos de prest√≠gio!`, 'success');
            addToEventLog(`Reiniciou por prest√≠gio (+‚≠ê${prestigePoints})`);
            
            // Reiniciar o jogo, mantendo apenas prest√≠gio e conquistas
            const savedAchievements = {...gameState.achievements};
            const savedPrestigePoints = gameState.prestigePoints;
            const savedPrestigeUpgrades = {...gameState.prestigeUpgrades};
            const savedResearch = {...gameState.research};
            const savedCemeteryName = gameState.cemeteryName;
            
            startNewGame();
            
            // Restaurar prest√≠gio e conquistas
            gameState.achievements = savedAchievements;
            gameState.prestigePoints = savedPrestigePoints;
            gameState.prestigeUpgrades = savedPrestigeUpgrades;
            gameState.research = savedResearch;
            gameState.cemeteryName = savedCemeteryName;
            
            // Aplicar b√¥nus de prest√≠gio
            gameState.money += gameState.prestigeUpgrades.initialMoney * 1000;
            gameState.prestigeMultiplier += gameState.prestigeUpgrades.earningsMultiplier * 0.1;
            
            updateDisplay();
            initializeAchievements();
        }

        // Comprar melhoria de prest√≠gio
        function buyPrestigeUpgrade(upgradeId) {
            const upgradeCosts = {
                initialMoney: 5,
                productionSpeed: 10,
                earningsMultiplier: 15,
                employeeCapacity: 20
            };
            
            const cost = upgradeCosts[upgradeId];
            
            if (gameState.prestigePoints < cost) {
                showNotification('Pontos de prest√≠gio insuficientes!', 'error');
                return;
            }
            
            gameState.prestigePoints -= cost;
            gameState.prestigeUpgrades[upgradeId]++;
            
            showNotification(`Melhoria de prest√≠gio comprada: ${upgradeId.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}!`, 'success');
            addToEventLog(`Comprou melhoria de prest√≠gio: ${upgradeId.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}`);
            
            updateDisplay();
        }

        // Sistema de fantasma flutuante
        function startFloatingGhost() {
            setInterval(() => {
                if (!gameState.floatingGhost.active && Math.random() < 0.1) {
                    showFloatingGhost();
                }
            }, 30000); // Verificar a cada 30 segundos
        }

        function showFloatingGhost() {
            if (gameState.floatingGhost.active) return;
            
            gameState.floatingGhost.active = true;
            
            const ghost = document.createElement('div');
            ghost.className = 'floating-ghost';
            ghost.textContent = 'üëª';
            ghost.style.left = `${Math.random() * 80 + 10}%`;
            ghost.style.top = `${Math.random() * 60 + 20}%`;
            
            ghost.addEventListener('click', () => {
                collectFloatingGhost(ghost);
            });
            
            document.body.appendChild(ghost);
            gameState.floatingGhost.element = ghost;
            
            // Remover fantasma ap√≥s 10 segundos se n√£o for clicado
            gameState.floatingGhost.timeout = setTimeout(() => {
                if (gameState.floatingGhost.active) {
                    document.body.removeChild(ghost);
                    gameState.floatingGhost.active = false;
                }
            }, 10000);
        }

        function collectFloatingGhost(ghost) {
            if (!gameState.floatingGhost.active) return;
            
            clearTimeout(gameState.floatingGhost.timeout);
            document.body.removeChild(ghost);
            gameState.floatingGhost.active = false;
            
            // Calcular recompensa
            const baseReward = gameState.passiveIncome * 10;
            const bonusBones = Math.floor(Math.random() * 10) + 5;
            
            gameState.money += baseReward;
            gameState.bones += bonusBones;
            
            showNotification(`Fantasma coletado! +üí∞${baseReward} e +ü¶¥${bonusBones}`, 'success');
            addToEventLog(`Coletou fantasma flutuante (+üí∞${baseReward}, +ü¶¥${bonusBones})`);
            
            updateDisplay();
        }

        // Sistema de texto flutuante
        function setupFloatingText() {
            // Adicionar evento de clique em todos os bot√µes que geram recursos
            const resourceButtons = [
                'basic-funeral-button', 'premium-funeral-button',
                'basic-plan-button', 'premium-plan-button',
                'basic-pickaxe-button', 'improved-pickaxe-button',
                'deep-mining-button'
            ];
            
            resourceButtons.forEach(buttonId => {
                const button = document.getElementById(buttonId);
                if (button) {
                    button.addEventListener('click', function(e) {
                        // Obter a recompensa esperada
                        let reward = 0;
                        switch(buttonId) {
                            case 'basic-funeral-button': reward = 300; break;
                            case 'premium-funeral-button': reward = 800; break;
                            case 'basic-plan-button': reward = 5; break;
                            case 'premium-plan-button': reward = 15; break;
                            case 'basic-pickaxe-button': reward = 20; break;
                            case 'improved-pickaxe-button': reward = 50; break;
                            case 'deep-mining-button': reward = 100; break;
                        }
                        
                        if (reward > 0) {
                            createFloatingText(e.clientX, e.clientY, `+üí∞${reward}`);
                        }
                    });
                }
            });
        }

        function createFloatingText(x, y, text) {
            const floatingText = document.createElement('div');
            floatingText.className = 'floating-text';
            floatingText.textContent = text;
            floatingText.style.left = `${x}px`;
            floatingText.style.top = `${y}px`;
            
            document.body.appendChild(floatingText);
            
            // Remover ap√≥s a anima√ß√£o
            setTimeout(() => {
                document.body.removeChild(floatingText);
            }, 1500);
        }

        // Loop principal do jogo
        function gameLoop() {
            // Processar vel√≥rios
            if (gameState.basicFuneralProgress > 0) {
                gameState.basicFuneralProgress -= 10;
                if (gameState.basicFuneralProgress <= 0) {
                    let earnings = 300 * gameState.prestigeMultiplier;
                    if (gameState.specialEvent.active && gameState.specialEvent.type === 'funeral_boost') {
                        earnings *= gameState.specialEvent.multiplier;
                    }
                    gameState.money += earnings;
                    gameState.coffins += 1; // Recupera o caix√£o
                    showNotification(`Vel√≥rio b√°sico conclu√≠do! Ganhou üí∞${earnings}`, 'success');
                    addToEventLog(`Concluiu vel√≥rio b√°sico (+üí∞${earnings})`);
                    
                    // Verificar conquista
                    checkAchievement('moneyMaker', gameState.money);
                }
            }
            
            if (gameState.premiumFuneralProgress > 0) {
                gameState.premiumFuneralProgress -= 8;
                if (gameState.premiumFuneralProgress <= 0) {
                    let earnings = 800 * gameState.prestigeMultiplier;
                    if (gameState.specialEvent.active && gameState.specialEvent.type === 'funeral_boost') {
                        earnings *= gameState.specialEvent.multiplier;
                    }
                    gameState.money += earnings;
                    gameState.coffins += 1; // Recupera o caix√£o
                    showNotification(`Vel√≥rio premium conclu√≠do! Ganhou üí∞${earnings}`, 'success');
                    addToEventLog(`Concluiu vel√≥rio premium (+üí∞${earnings})`);
                    
                    // Verificar conquista
                    checkAchievement('moneyMaker', gameState.money);
                }
            }
            
            // Processar planos funer√°rios
            if (gameState.basicPlanProgress > 0) {
                gameState.basicPlanProgress -= 15;
                if (gameState.basicPlanProgress <= 0) {
                    gameState.passiveIncome += 5;
                    showNotification('Plano b√°sico vendido! Aumentou a renda passiva.', 'success');
                    addToEventLog('Vendeu plano b√°sico (+üí∞5/seg)');
                }
            }
            
            if (gameState.premiumPlanProgress > 0) {
                gameState.premiumPlanProgress -= 12;
                if (gameState.premiumPlanProgress <= 0) {
                    gameState.passiveIncome += 15;
                    showNotification('Plano premium vendido! Aumentou a renda passiva.', 'success');
                    addToEventLog('Vendeu plano premium (+üí∞15/seg)');
                }
            }
            
            // Processar picaretas
            if (gameState.basicPickaxeProgress > 0) {
                gameState.basicPickaxeProgress -= 20;
                if (gameState.basicPickaxeProgress <= 0) {
                    // Picareta b√°sica: chance de encontrar ossos, pouco dinheiro ou objetos
                    const random = Math.random();
                    if (random < 0.6) {
                        // Ossos
                        const bonesFound = Math.floor(Math.random() * 3) + 1;
                        gameState.bones += bonesFound;
                        showNotification(`Picareta b√°sica: encontrou ${bonesFound} ossos!`, 'success');
                        addToEventLog(`Picareta b√°sica: +ü¶¥${bonesFound}`);
                        checkAchievement('boneCollector', gameState.bones);
                    } else if (random < 0.9) {
                        // Dinheiro
                        const moneyFound = Math.floor(Math.random() * 30) + 10;
                        gameState.money += moneyFound;
                        showNotification(`Picareta b√°sica: encontrou üí∞${moneyFound}!`, 'success');
                        addToEventLog(`Picareta b√°sica: +üí∞${moneyFound}`);
                    } else {
                        // Objeto valioso
                        const objects = ['Anel Antigo', 'Moeda Rara', 'Estatueta Valiosa'];
                        const randomObject = objects[Math.floor(Math.random() * objects.length)];
                        gameState.treasuresCollection.push(randomObject);
                        gameState.treasures++;
                        showNotification(`Picareta b√°sica: encontrou ${randomObject}!`, 'success');
                        addToEventLog(`Picareta b√°sica: encontrou ${randomObject}`);
                        checkAchievement('treasureHunter', gameState.treasures);
                    }
                }
            }
            
            if (gameState.improvedPickaxeProgress > 0) {
                gameState.improvedPickaxeProgress -= 15;
                if (gameState.improvedPickaxeProgress <= 0) {
                    // Picareta aprimorada: maior chance de tesouros
                    const random = Math.random();
                    if (random < 0.4) {
                        // Ossos
                        const bonesFound = Math.floor(Math.random() * 5) + 3;
                        gameState.bones += bonesFound;
                        showNotification(`Picareta aprimorada: encontrou ${bonesFound} ossos!`, 'success');
                        addToEventLog(`Picareta aprimorada: +ü¶¥${bonesFound}`);
                        checkAchievement('boneCollector', gameState.bones);
                    } else if (random < 0.7) {
                        // Dinheiro
                        const moneyFound = Math.floor(Math.random() * 80) + 20;
                        gameState.money += moneyFound;
                        showNotification(`Picareta aprimorada: encontrou üí∞${moneyFound}!`, 'success');
                        addToEventLog(`Picareta aprimorada: +üí∞${moneyFound}`);
                    } else if (random < 0.95) {
                        // Objeto valioso
                        const objects = ['Joia Preciosa', 'Rel√≠quia Familiar', 'Medalha Hist√≥rica'];
                        const randomObject = objects[Math.floor(Math.random() * objects.length)];
                        gameState.treasuresCollection.push(randomObject);
                        gameState.treasures++;
                        showNotification(`Picareta aprimorada: encontrou ${randomObject}!`, 'success');
                        addToEventLog(`Picareta aprimorada: encontrou ${randomObject}`);
                        checkAchievement('treasureHunter', gameState.treasures);
                    } else {
                        // Diamante raro
                        gameState.treasures += 2;
                        gameState.treasuresCollection.push('Diamante Raro');
                        showNotification('Picareta aprimorada: encontrou um Diamante Raro! üíé', 'success');
                        addToEventLog('Picareta aprimorada: encontrou Diamante Raro');
                        checkAchievement('treasureHunter', gameState.treasures);
                    }
                }
            }
            
            // Processar minera√ß√£o profunda
            if (gameState.deepMiningProgress > 0) {
                gameState.deepMiningProgress -= 15;
                if (gameState.deepMiningProgress <= 0) {
                    let bonesFound = Math.floor(Math.random() * 10) + 5;
                    if (gameState.specialEvent.active && gameState.specialEvent.type === 'mining_boost') {
                        bonesFound = Math.floor(bonesFound * gameState.specialEvent.multiplier);
                    }
                    gameState.bones += bonesFound;
                    showNotification(`Minera√ß√£o profunda conclu√≠da! Encontrou ${bonesFound} ossos.`, 'success');
                    addToEventLog(`Concluiu minera√ß√£o profunda (+ü¶¥${bonesFound})`);
                    
                    // Verificar conquista
                    checkAchievement('boneCollector', gameState.bones);
                    
                    // Maior chance de encontrar tesouro
                    let treasureChance = 0.3;
                    if (gameState.specialEvent.active && gameState.specialEvent.type === 'treasure_boost') {
                        treasureChance *= gameState.specialEvent.multiplier;
                    }
                    
                    if (Math.random() < treasureChance) {
                        const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
                        if (emptyIndex !== -1) {
                            gameState.cemeteryGrid[emptyIndex] = { type: 'treasure', level: 0 };
                            showNotification('Encontrou um tesouro enterrado no cemit√©rio!', 'success');
                            addToEventLog('Encontrou um tesouro enterrado');
                            initializeCemetery();
                        }
                    }
                }
            }
            
            // Processar expedi√ß√µes
            if (gameState.shortExpeditionProgress > 0) {
                gameState.shortExpeditionProgress -= 25;
                if (gameState.shortExpeditionProgress <= 0) {
                    const rewards = {
                        money: Math.floor(Math.random() * 500) + 500,
                        bones: Math.floor(Math.random() * 20) + 10,
                        treasures: Math.random() < 0.2 ? 1 : 0
                    };
                    
                    gameState.money += rewards.money;
                    gameState.bones += rewards.bones;
                    gameState.treasures += rewards.treasures;
                    
                    showNotification(`Expedi√ß√£o curta conclu√≠da! Recompensas: üí∞${rewards.money}, ü¶¥${rewards.bones}${rewards.treasures > 0 ? ', üíé1' : ''}`, 'success');
                    addToEventLog(`Expedi√ß√£o curta conclu√≠da (+üí∞${rewards.money}, +ü¶¥${rewards.bones}${rewards.treasures > 0 ? ', +üíé1' : ''})`);
                    
                    // Verificar conquistas
                    checkAchievement('moneyMaker', gameState.money);
                    checkAchievement('boneCollector', gameState.bones);
                    if (rewards.treasures > 0) {
                        checkAchievement('treasureHunter', gameState.treasures);
                    }
                }
            }
            
            if (gameState.longExpeditionProgress > 0) {
                gameState.longExpeditionProgress -= 15;
                if (gameState.longExpeditionProgress <= 0) {
                    const rewards = {
                        money: Math.floor(Math.random() * 1500) + 1000,
                        bones: Math.floor(Math.random() * 50) + 25,
                        treasures: Math.floor(Math.random() * 3) + 1
                    };
                    
                    gameState.money += rewards.money;
                    gameState.bones += rewards.bones;
                    gameState.treasures += rewards.treasures;
                    
                    showNotification(`Expedi√ß√£o longa conclu√≠da! Recompensas: üí∞${rewards.money}, ü¶¥${rewards.bones}, üíé${rewards.treasures}`, 'success');
                    addToEventLog(`Expedi√ß√£o longa conclu√≠da (+üí∞${rewards.money}, +ü¶¥${rewards.bones}, +üíé${rewards.treasures})`);
                    
                    // Verificar conquistas
                    checkAchievement('moneyMaker', gameState.money);
                    checkAchievement('boneCollector', gameState.bones);
                    checkAchievement('treasureHunter', gameState.treasures);
                }
            }
            
            // Funcion√°rios automatizados
            if (gameState.hiredEmployees.digger > 0 && gameState.money >= 100) {
                const emptyIndex = gameState.cemeteryGrid.findIndex(cell => cell.type === 'empty');
                if (emptyIndex !== -1 && Math.random() < 0.1) {
                    gameState.money -= 100;
                    gameState.cemeteryGrid[emptyIndex] = { type: 'grave', level: 1 };
                    addToEventLog('Coveiro construiu um t√∫mulo automaticamente');
                    initializeCemetery();
                }
            }
            
            if (gameState.hiredEmployees.organizer > 0 && gameState.money >= 200 && gameState.coffins > 0) {
                if (Math.random() < 0.1) {
                    gameState.money -= 200;
                    gameState.coffins -= 1;
                    let earnings = 300 * gameState.prestigeMultiplier;
                    if (gameState.specialEvent.active && gameState.specialEvent.type === 'funeral_boost') {
                        earnings *= gameState.specialEvent.multiplier;
                    }
                    gameState.money += earnings;
                    gameState.coffins += 1;
                    addToEventLog(`Organizador realizou um vel√≥rio b√°sico (+üí∞${earnings})`);
                }
            }
            
            if (gameState.hiredEmployees.salesman > 0 && gameState.money >= 150) {
                if (Math.random() < 0.1) {
                    gameState.money -= 150;
                    gameState.passiveIncome += 5;
                    addToEventLog('Vendedor vendeu um plano b√°sico (+üí∞5/seg)');
                }
            }
            
            if (gameState.hiredEmployees.miner > 0 && gameState.money >= 50) {
                if (Math.random() < 0.1) {
                    gameState.money -= 50;
                    let bonesFound = Math.floor(Math.random() * 3) + 1;
                    if (gameState.specialEvent.active && gameState.specialEvent.type === 'mining_boost') {
                        bonesFound = Math.floor(bonesFound * gameState.specialEvent.multiplier);
                    }
                    gameState.bones += bonesFound;
                    addToEventLog(`Minerador encontrou ${bonesFound} ossos`);
                }
            }
            
            if (gameState.hiredEmployees.gardener > 0) {
                // Jardineiro aumenta renda passiva
                if (Math.random() < 0.05) {
                    gameState.passiveIncome += 1;
                    addToEventLog('Jardineiro aumentou a atratividade do cemit√©rio (+üí∞1/seg)');
                }
            }
            
            if (gameState.hiredEmployees.florist > 0 && gameState.money >= 100) {
                if (Math.random() < 0.1) {
                    gameState.money -= 100;
                    let earnings = 150 * gameState.prestigeMultiplier;
                    gameState.money += earnings;
                    addToEventLog(`Florista vendeu flores (+üí∞${earnings})`);
                }
            }
            
            // Efeito do gerente (aumenta efici√™ncia de todos os funcion√°rios)
            let managerBonus = 1;
            if (gameState.hiredEmployees.manager > 0) {
                managerBonus = 1.15; // 15% de aumento na efici√™ncia
            }
            
            // Renda passiva
            let passiveIncome = gameState.passiveIncome;
            if (gameState.specialEvent.active && gameState.specialEvent.type === 'income_boost') {
                passiveIncome *= gameState.specialEvent.multiplier;
            }
            gameState.money += passiveIncome * managerBonus;
            
            // Atualizar eventos especiais
            updateSpecialEvents();
            
            // Incrementar dia a cada 60 segundos
            gameState.day += 1/60;
            
            // Atualizar display
            updateDisplay();
        }

        // Sistema de eventos especiais
        function checkSpecialEvents() {
            // 10% de chance de um evento especial a cada verifica√ß√£o
            if (!gameState.specialEvent.active && Math.random() < 0.1) {
                startSpecialEvent();
            }
        }

        function startSpecialEvent() {
            const events = [
                {
                    type: 'funeral_boost',
                    title: 'Dia dos Finados',
                    description: 'Fluxo de visitantes aumentou!',
                    effect: 'Vel√≥rios rendem 2x mais',
                    multiplier: 2,
                    duration: 300 // 5 minutos
                },
                {
                    type: 'mining_boost',
                    title: 'Prosperidade Mineral',
                    description: 'Veios ricos descobertos!',
                    effect: 'Minera√ß√£o produz 3x mais ossos',
                    multiplier: 3,
                    duration: 240 // 4 minutos
                },
                {
                    type: 'treasure_boost',
                    title: 'Sorte do Ca√ßador',
                    description: 'Tesouros est√£o mais f√°ceis de encontrar!',
                    effect: 'Chance de tesouro quadruplicada',
                    multiplier: 4,
                    duration: 180 // 3 minutos
                },
                {
                    type: 'income_boost',
                    title: 'Economia Aquecida',
                    description: 'Demanda por servi√ßos funer√°rios aumentou!',
                    effect: 'Renda passiva dobrada',
                    multiplier: 2,
                    duration: 360 // 6 minutos
                }
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            gameState.specialEvent = {
                active: true,
                type: event.type,
                endTime: Date.now() + (event.duration * 1000),
                multiplier: event.multiplier
            };
            
            document.getElementById('event-title').textContent = event.title;
            document.getElementById('event-description').textContent = event.description;
            document.getElementById('event-effect').textContent = event.effect;
            document.getElementById('special-event').style.display = 'block';
            
            showNotification(`Evento especial: ${event.title}!`, 'success');
            addToEventLog(`Evento especial iniciado: ${event.title}`);
        }

        function updateSpecialEvents() {
            if (gameState.specialEvent.active && Date.now() > gameState.specialEvent.endTime) {
                gameState.specialEvent.active = false;
                document.getElementById('special-event').style.display = 'none';
                showNotification('Evento especial terminou.', 'info');
                addToEventLog('Evento especial terminou');
            }
            
            if (gameState.specialEvent.active) {
                const timeLeft = Math.max(0, gameState.specialEvent.endTime - Date.now());
                const minutes = Math.floor(timeLeft / 60000);
                const seconds = Math.floor((timeLeft % 60000) / 1000);
                document.getElementById('event-timer').textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        // Atualizar display
        function updateDisplay() {
            // Atualizar nome do cemit√©rio
            document.getElementById('cemetery-name-display').textContent = gameState.cemeteryName;
            
            // Atualizar estat√≠sticas
            document.getElementById('money-stat').textContent = Math.floor(gameState.money);
            document.getElementById('bones-stat').textContent = gameState.bones;
            document.getElementById('treasure-stat').textContent = gameState.treasures;
            document.getElementById('coffins-stat').textContent = gameState.coffins;
            document.getElementById('employees-stat').textContent = gameState.employees;
            document.getElementById('prestige-stat').textContent = gameState.prestigePoints;
            
            // Atualizar informa√ß√µes de prest√≠gio
            document.getElementById('prestige-info').textContent = `Multiplicador: ${gameState.prestigeMultiplier.toFixed(1)}x | Dia: ${Math.floor(gameState.day)}`;
            
            // Atualizar barras de progresso
            document.getElementById('basic-funeral-progress').style.width = `${gameState.basicFuneralProgress}%`;
            document.getElementById('premium-funeral-progress').style.width = `${gameState.premiumFuneralProgress}%`;
            document.getElementById('basic-plan-progress').style.width = `${gameState.basicPlanProgress}%`;
            document.getElementById('premium-plan-progress').style.width = `${gameState.premiumPlanProgress}%`;
            document.getElementById('basic-pickaxe-progress').style.width = `${gameState.basicPickaxeProgress}%`;
            document.getElementById('improved-pickaxe-progress').style.width = `${gameState.improvedPickaxeProgress}%`;
            document.getElementById('deep-mining-progress').style.width = `${gameState.deepMiningProgress}%`;
            document.getElementById('short-expedition-progress').style.width = `${gameState.shortExpeditionProgress}%`;
            document.getElementById('long-expedition-progress').style.width = `${gameState.longExpeditionProgress}%`;
            
            // Atualizar contadores
            document.getElementById('resources-count').textContent = `Ossos: ${gameState.bones}, Tesouros: ${gameState.treasures}`;
            document.getElementById('passive-income').textContent = gameState.passiveIncome;
            
            // Atualizar funcion√°rios
            document.getElementById('digger-count').textContent = gameState.hiredEmployees.digger;
            document.getElementById('organizer-count').textContent = gameState.hiredEmployees.organizer;
            document.getElementById('salesman-count').textContent = gameState.hiredEmployees.salesman;
            document.getElementById('miner-count').textContent = gameState.hiredEmployees.miner;
            document.getElementById('gardener-count').textContent = gameState.hiredEmployees.gardener;
            document.getElementById('security-count').textContent = gameState.hiredEmployees.security;
            document.getElementById('florist-count').textContent = gameState.hiredEmployees.florist;
            document.getElementById('manager-count').textContent = gameState.hiredEmployees.manager;
            
            // Atualizar custos dos funcion√°rios
            document.getElementById('digger-cost').textContent = gameState.employeeCosts.digger;
            document.getElementById('organizer-cost').textContent = gameState.employeeCosts.organizer;
            document.getElementById('salesman-cost').textContent = gameState.employeeCosts.salesman;
            document.getElementById('miner-cost').textContent = gameState.employeeCosts.miner;
            document.getElementById('gardener-cost').textContent = gameState.employeeCosts.gardener;
            document.getElementById('security-cost').textContent = gameState.employeeCosts.security;
            document.getElementById('florist-cost').textContent = gameState.employeeCosts.florist;
            document.getElementById('manager-cost').textContent = gameState.employeeCosts.manager;
            
            // Atualizar status da automa√ß√£o
            updateAutomationStatus();
            
            // Atualizar √°rvore de pesquisa
            initializeResearchTree();
        }

        // Atualizar status da automa√ß√£o
        function updateAutomationStatus() {
            const automationStatus = document.getElementById('automation-status');
            automationStatus.innerHTML = '';
            
            const employeeEffects = [
                { type: 'digger', name: 'Coveiros', effect: 'Constroem t√∫mulos automaticamente' },
                { type: 'organizer', name: 'Organizadores', effect: 'Realizam vel√≥rios b√°sicos automaticamente' },
                { type: 'salesman', name: 'Vendedores', effect: 'Vendem planos funer√°rios automaticamente' },
                { type: 'miner', name: 'Mineradores', effect: 'Realizam minera√ß√£o b√°sica automaticamente' },
                { type: 'gardener', name: 'Jardineiros', effect: 'Aumentam a renda passiva' },
                { type: 'security', name: 'Seguran√ßas', effect: 'Reduzem eventos negativos' },
                { type: 'florist', name: 'Floristas', effect: 'Vendem flores para visitantes' },
                { type: 'manager', name: 'Gerentes', effect: 'Aumentam efici√™ncia de todos os funcion√°rios' }
            ];
            
            employeeEffects.forEach(employee => {
                if (gameState.hiredEmployees[employee.type] > 0) {
                    const effectDiv = document.createElement('div');
                    effectDiv.style.cssText = 'display: flex; justify-content: space-between; padding: 5px 0;';
                    effectDiv.innerHTML = `
                        <span>${employee.name}: ${gameState.hiredEmployees[employee.type]}</span>
                        <span style="color: var(--success);">${employee.effect}</span>
                    `;
                    automationStatus.appendChild(effectDiv);
                }
            });
            
            if (automationStatus.innerHTML === '') {
                automationStatus.innerHTML = '<p style="text-align: center; color: var(--text-light);">Nenhum funcion√°rio contratado ainda.</p>';
            }
        }

        // Adicionar entrada ao log de eventos
        function addToEventLog(message) {
            const logContent = document.getElementById('event-log-content');
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            
            const now = new Date();
            const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
            
            logEntry.textContent = `[${timeString}] ${message}`;
            logContent.appendChild(logEntry);
            
            // Manter apenas as √∫ltimas 10 entradas
            while (logContent.children.length > 10) {
                logContent.removeChild(logContent.firstChild);
            }
            
            // Rolagem autom√°tica para a entrada mais recente
            logContent.scrollTop = logContent.scrollHeight;
        }

        // Mostrar notifica√ß√£o
        function showNotification(message, type) {
            // Criar elemento de notifica√ß√£o
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px;
                border-radius: 10px;
                color: white;
                z-index: 1000;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                animation: slideIn 0.5s, fadeOut 0.5s 2.5s forwards;
            `;
            
            if (type === 'success') {
                notification.style.background = 'linear-gradient(135deg, var(--success), var(--success-dark))';
            } else if (type === 'error') {
                notification.style.background = 'linear-gradient(135deg, var(--secondary), var(--secondary-dark))';
            } else {
                notification.style.background = 'linear-gradient(135deg, var(--primary), var(--primary-dark))';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Remover ap√≥s a anima√ß√£o
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }

        // Trocar de aba
        function switchTab(tabId) {
            // Remover classe active de todas as abas e conte√∫dos
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Adicionar classe active √† aba selecionada
            const selectedTab = document.querySelector(`.tab[data-tab="${tabId}"]`);
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            const tabContent = document.getElementById(`${tabId}-tab`);
            if (tabContent) {
                tabContent.classList.add('active');
            }
        }

        // Iniciar novo jogo
        function startNewGame() {
            // Reiniciar estado do jogo
            gameState.money = 1000 + (gameState.prestigeUpgrades.initialMoney * 1000);
            gameState.bones = 0;
            gameState.treasures = 0;
            gameState.coffins = 5;
            gameState.employees = 0;
            gameState.day = 1;
            gameState.cemeterySize = 8;
            gameState.cemeteryGrid = [];
            gameState.basicFuneralProgress = 0;
            gameState.premiumFuneralProgress = 0;
            gameState.basicPlanProgress = 0;
            gameState.premiumPlanProgress = 0;
            gameState.passiveIncome = 0;
            gameState.basicPickaxeProgress = 0;
            gameState.improvedPickaxeProgress = 0;
            gameState.deepMiningProgress = 0;
            gameState.shortExpeditionProgress = 0;
            gameState.longExpeditionProgress = 0;
            gameState.treasuresCollection = [];
            gameState.hiredEmployees = {
                digger: 0,
                organizer: 0,
                salesman: 0,
                miner: 0,
                gardener: 0,
                security: 0,
                florist: 0,
                manager: 0
            };
            gameState.employeeCosts = {
                digger: 500,
                organizer: 800,
                salesman: 600,
                miner: 1000,
                gardener: 1200,
                security: 1500,
                florist: 900,
                manager: 3000
            };
            gameState.specialEvent = {
                active: false,
                type: null,
                endTime: 0,
                multiplier: 1
            };
            
            showScreen('game-screen');
            initializeCemetery();
            updateDisplay();
            
            // Limpar log de eventos
            document.getElementById('event-log-content').innerHTML = '';
            addToEventLog('Novo jogo iniciado');
            
            // Ativar a primeira aba
            switchTab('cemetery');
        }

        // Carregar jogo
        function loadGame() {
            try {
                const saved = localStorage.getItem('cemeteryTycoonSave');
                if (saved) {
                    const savedState = JSON.parse(saved);
                    
                    // Preservar o estado do tema
                    const currentDarkMode = gameState.darkMode;
                    
                    Object.assign(gameState, savedState);
                    
                    // Restaurar o estado do tema
                    gameState.darkMode = currentDarkMode;
                    document.body.classList.toggle('dark-mode', gameState.darkMode);
                    
                    const themeIcons = document.querySelectorAll('.theme-toggle i');
                    themeIcons.forEach(icon => {
                        if (gameState.darkMode) {
                            icon.className = 'fas fa-sun';
                        } else {
                            icon.className = 'fas fa-moon';
                        }
                    });
                    
                    showScreen('game-screen');
                    initializeCemetery();
                    updateDisplay();
                    initializeAchievements();
                    initializeDailyBonus();
                    initializeResearchTree();
                    
                    addToEventLog('Jogo carregado');
                    showNotification('Jogo carregado com sucesso!', 'success');
                    
                    // Ativar a primeira aba
                    switchTab('cemetery');
                } else {
                    showNotification('Nenhum jogo salvo encontrado.', 'info');
                }
            } catch (e) {
                console.error('Erro ao carregar jogo:', e);
                showNotification('Erro ao carregar jogo salvo.', 'error');
            }
        }

        // Salvar jogo
        function saveGame() {
            try {
                localStorage.setItem('cemeteryTycoonSave', JSON.stringify(gameState));
                showNotification('Jogo salvo com sucesso!', 'success');
                addToEventLog('Jogo salvo');
            } catch (e) {
                console.error('Erro ao salvar jogo:', e);
                showNotification('Erro ao salvar jogo.', 'error');
            }
        }

        // Mostrar tela espec√≠fica
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            document.getElementById(screenId).classList.add('active');
        }
    </script>
</body>
</html>